<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Deep-Insights.js | Populated Places</title>
    <meta name=viewport content="width=device-width initial-scale=1">
    <link rel="stylesheet" href="../dist/themes/css/deep-insights.css" />
    <script src="../dist/deep-insights.uncompressed.js"></script>
    <style type="text/css">
      html, body {
        position:relative;
        height: 100%;
        padding: 0;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="dashboard"></div>

    <script>
      window.onload = function() {
        var vizJSON = 'https://javi.cartodb.com/api/v3/viz/1e1199c0-da50-11e5-acbc-0ecd1babdde5/viz.json?callback=?'
        cartodb.$.getJSON(vizJSON, function(data) {
          var dashboard = cartodb.deepInsights.createDashboard('#dashboard', data, {
            no_cdn: false,
            cartodb_logo: false
          });
          dashboard.vis.done(function() {
              window.dashboard = dashboard
            })
            .error(function(err) {
              console.error(err);
            });

          console.info('first widget is disabled on start, run the following the dev console to enable it:',
          'dashboard.widgets._widgetsCollection.at(0).update({sync_on_data_change: true, sync_on_bbox_change: true, title: "Min population"})')
          });
      }
    </script>
  </body>
</html>
